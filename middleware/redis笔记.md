redis 事务

编译时异常，所有语句都会不执行

执行时异常，一条语句失败不影响其他语句



悲观锁

很悲观，认为任何时候都会出现问题，无论做什么都会加锁

乐观锁

很乐观，认为任何时候都不会出现问题，所以不会上锁。更新数据的时候去判断一下，在此期间是否有人修改过这个数据

获取version

更新时比较version



使用watch





jedis: 采用的直连，多个线程操作的话，不安全，如果想要避免不安全，使用jedis pool连接池，BIO

lettuce：采用netty，实例可以在多个线程中进行共享，不存在线程不安全的情况，NIO



redis 缓存穿透和雪崩

